name: "build"
description: "built static"

inputs:
  infura_project_id:
    description: “INFURA_PROJECT_ID”
    required: true
  alchemy_key:
    description: “ALCHEMY_KEY”
    required: true
  blocknative_dapp_id:
    description: “BLOCKNATIVE_DAPP_ID”
    required: true
  portis_dapp_id:
    description: “PORTIS_DAPP_ID”
  fathom_side_id:
    description: “FATHOM analitics”
  ga_id:
    description: “GA analitics”
runs:
  using: "composite"
  steps:

    - name: Use Node.js
      uses: actions/setup-node@v1
      with:
        node-version: '14.x'

    - name: Install deps
      run: npm install -g npm@7 && npm ci
      shell: bash

    - name: Run build
      env:
        VUE_APP_INFURA_PROJECT_ID: ${{inputs.infura_project_id}}
        VUE_APP_ALCHEMY_KEY: ${{inputs.alchemy_key}}
        VUE_APP_BLOCKNATIVE_DAPP_ID: ${{inputs.blocknative_dapp_id}}

        VUE_APP_PORTIS_DAPP_ID: ${{inputs.portis_dapp_id}}
        VUE_APP_FATHOM_SITE_ID: ${{inputs.fathom_side_id}}
        VUE_APP_GA_ID: ${{inputs.ga_id}}
      run: npm run build
      shell: bash

#    - name: Share builded assets
#      uses: actions/upload-artifact@master
#      with:
#        name: build_result
#        path: ./dist
